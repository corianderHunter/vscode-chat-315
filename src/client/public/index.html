<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>chart server</title>
        <link rel="stylesheet" href="css/amazeui.min.css" />
        <link rel="stylesheet" href="css/main.css" />
    </head>

    <body>
        <div id="app"></div>

        <script type="text/javascript" src="js/jquery.min.js"></script>
        <script type="text/javascript" src="js/amazeui.min.js"></script>
        <script type="text/javascript" src="js/zUI.js"></script>
        <script type="text/javascript" src="js/wechat.js"></script>

        <script type="text/javascript">
            const vscode = acquireVsCodeApi();

            //三图标
            window.onload = function() {
                function a() {
                    var si1 = document.getElementById('si_1');
                    var si2 = document.getElementById('si_2');
                    var si3 = document.getElementById('si_3');
                    si1.onclick = function() {
                        si1.style.background =
                            'url(images/icon/head_2_1.png) no-repeat';
                        si2.style.background = '';
                        si3.style.background = '';
                    };
                    si2.onclick = function() {
                        si2.style.background =
                            'url(images/icon/head_3_1.png) no-repeat';
                        si1.style.background = '';
                        si3.style.background = '';
                    };
                    si3.onclick = function() {
                        si3.style.background =
                            'url(images/icon/head_4_1.png) no-repeat';
                        si1.style.background = '';
                        si2.style.background = '';
                    };
                }

                function b() {
                    var text = document.getElementById('input_box');
                    var chat = document.getElementById('chatbox');
                    var btn = document.getElementById('send');
                    var talk = document.getElementById('talkbox');
                    btn.onclick = function() {
                        if (text.value == '') {
                            alert('不能发送空消息');
                        } else {
                            chat.innerHTML +=
                                '<li class="me"><img src="' +
                                'images/own_head.jpg' +
                                '"><span>' +
                                text.value +
                                '</span></li>';
                            text.value = '';
                            chat.scrollTop = chat.scrollHeight;
                            talk.style.background = '#fff';
                            text.style.background = '#fff';
                        }
                        vscode.postMessage({
                            message: 'webview post msg',
                            info: {
                                _id: '2dqdy43hj4325243'
                            }
                        });
                    };
                }
                a();
                b();
            };
        </script>
    </body>
</html>
